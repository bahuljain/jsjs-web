!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";!function(root,factory){"function"==typeof define&&define.amd?define(factory):"undefined"!=typeof exports?module.exports=factory():root.cash=root.$=factory()}(this,function(){function find(selector,context){context=context||doc;var elems=classMatch.test(selector)?context.getElementsByClassName(selector.slice(1)):singlet.test(selector)?context.getElementsByTagName(selector):context.querySelectorAll(selector);return elems}function parseHTML(str){if(!frag){frag=doc.implementation.createHTMLDocument();var base=frag.createElement("base");base.href=doc.location.href,frag.head.appendChild(base)}return frag.body.innerHTML=str,frag.body.childNodes}function onReady(fn){"loading"!==doc.readyState?fn():doc.addEventListener("DOMContentLoaded",fn)}function Init(selector,context){if(!selector)return this;if(selector.cash&&selector!==win)return selector;var length,elems=selector,i=0;if(isString(selector))elems=idMatch.test(selector)?doc.getElementById(selector.slice(1)):htmlMatch.test(selector)?parseHTML(selector):find(selector,context);else if(isFunction(selector))return onReady(selector),this;if(!elems)return this;if(elems.nodeType||elems===win)this[0]=elems,this.length=1;else for(length=this.length=elems.length;i<length;i++)this[i]=elems[i];return this}function cash(selector,context){return new Init(selector,context)}function each(collection,callback){for(var l=collection.length,i=0;i<l&&callback.call(collection[i],collection[i],i,collection)!==!1;i++);}function matches(el,selector){var m=el&&(el.matches||el.webkitMatchesSelector||el.mozMatchesSelector||el.msMatchesSelector||el.oMatchesSelector);return!!m&&m.call(el,selector)}function getCompareFunction(selector){return isString(selector)?matches:selector.cash?function(el){return selector.is(el)}:function(el,selector){return el===selector}}function unique(collection){return cash(slice.call(collection).filter(function(item,index,self){return self.indexOf(item)===index}))}function getDataCache(node){return node[uid]=node[uid]||{}}function setData(node,key,value){return getDataCache(node)[key]=value}function getData(node,key){var c=getDataCache(node);return void 0===c[key]&&(c[key]=node.dataset?node.dataset[key]:cash(node).attr("data-"+key)),c[key]}function removeData(node,key){var c=getDataCache(node);c?delete c[key]:node.dataset?delete node.dataset[key]:cash(node).removeAttr("data-"+name)}function getClasses(c){return isString(c)&&c.match(notWhiteMatch)}function hasClass(v,c){return v.classList?v.classList.contains(c):new RegExp("(^| )"+c+"( |$)","gi").test(v.className)}function addClass(v,c,spacedName){v.classList?v.classList.add(c):spacedName.indexOf(" "+c+" ")&&(v.className+=" "+c)}function removeClass(v,c){v.classList?v.classList.remove(c):v.className=v.className.replace(c,"")}function compute(el,prop){return parseInt(win.getComputedStyle(el[0],null)[prop],10)||0}function registerEvent(node,eventName,callback){var eventCache=getData(node,"_cashEvents")||setData(node,"_cashEvents",{});eventCache[eventName]=eventCache[eventName]||[],eventCache[eventName].push(callback),node.addEventListener(eventName,callback)}function removeEvent(node,eventName,callback){var index,events=getData(node,"_cashEvents"),eventCache=events&&events[eventName];eventCache&&(callback?(node.removeEventListener(eventName,callback),index=eventCache.indexOf(callback),index>=0&&eventCache.splice(index,1)):(each(eventCache,function(event){node.removeEventListener(eventName,event)}),eventCache=[]))}function encode(name,value){return"&"+encodeURIComponent(name)+"="+encodeURIComponent(value).replace(/%20/g,"+")}function getSelectMultiple_(el){var values=[];return each(el.options,function(o){o.selected&&values.push(o.value)}),values.length?values:null}function getSelectSingle_(el){var selectedIndex=el.selectedIndex;return selectedIndex>=0?el.options[selectedIndex].value:null}function getValue(el){var type=el.type;if(!type)return null;switch(type.toLowerCase()){case"select-one":return getSelectSingle_(el);case"select-multiple":return getSelectMultiple_(el);case"radio":return el.checked?el.value:null;case"checkbox":return el.checked?el.value:null;default:return el.value?el.value:null}}function insertElement(el,child,prepend){if(prepend){var first=el.childNodes[0];el.insertBefore(child,first)}else el.appendChild(child)}function insertContent(parent,child,prepend){var str=isString(child);return!str&&child.length?void each(child,function(v){return insertContent(parent,v,prepend)}):void each(parent,str?function(v){return v.insertAdjacentHTML(prepend?"afterbegin":"beforeend",child)}:function(v,i){return insertElement(v,0===i?child:child.cloneNode(!0),prepend)})}var frag,doc=document,win=window,ArrayProto=Array.prototype,slice=ArrayProto.slice,filter=ArrayProto.filter,push=ArrayProto.push,noop=function(){},isFunction=function(item){return typeof item==typeof noop&&item.call},isString=function(item){return"string"==typeof item},idMatch=/^#[\w-]*$/,classMatch=/^\.[\w-]*$/,htmlMatch=/<.+>/,singlet=/^\w+$/,fn=cash.fn=cash.prototype=Init.prototype={cash:!0,length:0,push:push,splice:ArrayProto.splice,map:ArrayProto.map,init:Init};Object.defineProperty(fn,"constructor",{value:cash}),cash.parseHTML=parseHTML,cash.noop=noop,cash.isFunction=isFunction,cash.isString=isString,cash.extend=fn.extend=function(target){target=target||{};var args=slice.call(arguments),length=args.length,i=1;for(1===args.length&&(target=this,i=0);i<length;i++)if(args[i])for(var key in args[i])args[i].hasOwnProperty(key)&&(target[key]=args[i][key]);return target},cash.extend({merge:function(first,second){for(var len=+second.length,i=first.length,j=0;j<len;i++,j++)first[i]=second[j];return first.length=i,first},each:each,matches:matches,unique:unique,isArray:Array.isArray,isNumeric:function(n){return!isNaN(parseFloat(n))&&isFinite(n)}});var uid=cash.uid="_cash"+Date.now();fn.extend({data:function(name,value){if(isString(name))return void 0===value?getData(this[0],name):this.each(function(v){return setData(v,name,value)});for(var key in name)this.data(key,name[key]);return this},removeData:function(key){return this.each(function(v){return removeData(v,key)})}});var notWhiteMatch=/\S+/g;fn.extend({addClass:function(c){var classes=getClasses(c);return classes?this.each(function(v){var spacedName=" "+v.className+" ";each(classes,function(c){addClass(v,c,spacedName)})}):this},attr:function(name,value){if(name){if(isString(name))return void 0===value?this[0]?this[0].getAttribute?this[0].getAttribute(name):this[0][name]:void 0:this.each(function(v){v.setAttribute?v.setAttribute(name,value):v[name]=value});for(var key in name)this.attr(key,name[key]);return this}},hasClass:function(c){var check=!1,classes=getClasses(c);return classes&&classes.length&&this.each(function(v){return check=hasClass(v,classes[0]),!check}),check},prop:function(name,value){if(isString(name))return void 0===value?this[0][name]:this.each(function(v){v[name]=value});for(var key in name)this.prop(key,name[key]);return this},removeAttr:function(name){return this.each(function(v){v.removeAttribute?v.removeAttribute(name):delete v[name]})},removeClass:function(c){if(!arguments.length)return this.attr("class","");var classes=getClasses(c);return classes?this.each(function(v){each(classes,function(c){removeClass(v,c)})}):this},removeProp:function(name){return this.each(function(v){delete v[name]})},toggleClass:function(c,state){if(void 0!==state)return this[state?"addClass":"removeClass"](c);var classes=getClasses(c);return classes?this.each(function(v){var spacedName=" "+v.className+" ";each(classes,function(c){hasClass(v,c)?removeClass(v,c):addClass(v,c,spacedName)})}):this}}),fn.extend({add:function(selector,context){return unique(cash.merge(this,cash(selector,context)))},each:function(callback){return each(this,callback),this},eq:function(index){return cash(this.get(index))},filter:function(selector){if(!selector)return this;var comparator=isFunction(selector)?selector:getCompareFunction(selector);return cash(filter.call(this,function(e){return comparator(e,selector)}))},first:function(){return this.eq(0)},get:function(index){return void 0===index?slice.call(this):index<0?this[index+this.length]:this[index]},index:function(elem){var child=elem?cash(elem)[0]:this[0],collection=elem?this:cash(child).parent().children();return slice.call(collection).indexOf(child)},last:function(){return this.eq(-1)}});var camelCase=function(){var camelRegex=/(?:^\w|[A-Z]|\b\w)/g,whiteSpace=/[\s-_]+/g;return function(str){return str.replace(camelRegex,function(letter,index){return letter[0===index?"toLowerCase":"toUpperCase"]()}).replace(whiteSpace,"")}}(),getPrefixedProp=function(){var cache={},doc=document,div=doc.createElement("div"),style=div.style;return function(prop){if(prop=camelCase(prop),cache[prop])return cache[prop];var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),prefixes=["webkit","moz","ms","o"],props=(prop+" "+prefixes.join(ucProp+" ")+ucProp).split(" ");return each(props,function(p){if(p in style)return cache[p]=prop=cache[prop]=p,!1}),cache[prop]}}();cash.prefixedProp=getPrefixedProp,cash.camelCase=camelCase,fn.extend({css:function(prop,value){if(isString(prop))return prop=getPrefixedProp(prop),arguments.length>1?this.each(function(v){return v.style[prop]=value}):win.getComputedStyle(this[0])[prop];for(var key in prop)this.css(key,prop[key]);return this}}),each(["Width","Height"],function(v){var lower=v.toLowerCase();fn[lower]=function(){return this[0].getBoundingClientRect()[lower]},fn["inner"+v]=function(){return this[0]["client"+v]},fn["outer"+v]=function(margins){return this[0]["offset"+v]+(margins?compute(this,"margin"+("Width"===v?"Left":"Top"))+compute(this,"margin"+("Width"===v?"Right":"Bottom")):0)}}),fn.extend({off:function(eventName,callback){return this.each(function(v){return removeEvent(v,eventName,callback)})},on:function(eventName,delegate,callback,runOnce){var originalCallback;if(!isString(eventName)){for(var key in eventName)this.on(key,delegate,eventName[key]);return this}return isFunction(delegate)&&(callback=delegate,delegate=null),"ready"===eventName?(onReady(callback),this):(delegate&&(originalCallback=callback,callback=function(e){for(var t=e.target;!matches(t,delegate);){if(t===this)return t=!1;t=t.parentNode}t&&originalCallback.call(t,e)}),this.each(function(v){var finalCallback=callback;runOnce&&(finalCallback=function(){callback.apply(this,arguments),removeEvent(v,eventName,finalCallback)}),registerEvent(v,eventName,finalCallback)}))},one:function(eventName,delegate,callback){return this.on(eventName,delegate,callback,!0)},ready:onReady,trigger:function(eventName,data){var evt=doc.createEvent("HTMLEvents");return evt.data=data,evt.initEvent(eventName,!0,!1),this.each(function(v){return v.dispatchEvent(evt)})}}),fn.extend({serialize:function(){var query="";return each(this[0].elements||this,function(el){if(!el.disabled&&"FIELDSET"!==el.tagName){var name=el.name;switch(el.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var values=getValue(el);null!==values&&each(values,function(value){query+=encode(name,value)});break;default:var value=getValue(el);null!==value&&(query+=encode(name,value))}}}),query.substr(1)},val:function(value){return void 0===value?getValue(this[0]):this.each(function(v){return v.value=value})}}),fn.extend({after:function(selector){return cash(selector).insertAfter(this),this},append:function(content){return insertContent(this,content),this},appendTo:function(parent){return insertContent(cash(parent),this),this},before:function(selector){return cash(selector).insertBefore(this),this},clone:function(){return cash(this.map(function(v){return v.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(content){if(void 0===content)return this[0].innerHTML;var source=content.nodeType?content[0].outerHTML:content;return this.each(function(v){return v.innerHTML=source})},insertAfter:function(selector){var _this=this;return cash(selector).each(function(el,i){var parent=el.parentNode,sibling=el.nextSibling;_this.each(function(v){parent.insertBefore(0===i?v:v.cloneNode(!0),sibling)})}),this},insertBefore:function(selector){var _this2=this;return cash(selector).each(function(el,i){var parent=el.parentNode;_this2.each(function(v){parent.insertBefore(0===i?v:v.cloneNode(!0),el)})}),this},prepend:function(content){return insertContent(this,content,!0),this},prependTo:function(parent){return insertContent(cash(parent),this,!0),this},remove:function(){return this.each(function(v){return v.parentNode.removeChild(v)})},text:function(content){return void 0===content?this[0].textContent:this.each(function(v){return v.textContent=content})}});var docEl=doc.documentElement;return fn.extend({position:function(){var el=this[0];return{left:el.offsetLeft,top:el.offsetTop}},offset:function(){var rect=this[0].getBoundingClientRect();return{top:rect.top+win.pageYOffset-docEl.clientTop,left:rect.left+win.pageXOffset-docEl.clientLeft}},offsetParent:function(){return cash(this[0].offsetParent)}}),fn.extend({children:function(selector){var elems=[];return this.each(function(el){push.apply(elems,el.children)}),elems=unique(elems),selector?elems.filter(function(v){return matches(v,selector)}):elems},closest:function(selector){return!selector||this.length<1?cash():this.is(selector)?this.filter(selector):this.parent().closest(selector)},is:function(selector){if(!selector)return!1;var match=!1,comparator=getCompareFunction(selector);return this.each(function(el){return match=comparator(el,selector),!match}),match},find:function(selector){if(!selector||selector.nodeType)return cash(selector&&this.has(selector).length?selector:null);var elems=[];return this.each(function(el){push.apply(elems,find(selector,el))}),unique(elems)},has:function(selector){var comparator=isString(selector)?function(el){return 0!==find(selector,el).length}:function(el){return el.contains(selector)};return this.filter(comparator)},next:function(){return cash(this[0].nextElementSibling)},not:function(selector){if(!selector)return this;var comparator=getCompareFunction(selector);return this.filter(function(el){return!comparator(el,selector)})},parent:function(){var result=[];return this.each(function(item){item&&item.parentNode&&result.push(item.parentNode)}),unique(result)},parents:function(selector){var last,result=[];return this.each(function(item){for(last=item;last&&last.parentNode&&last!==doc.body.parentNode;)last=last.parentNode,(!selector||selector&&matches(last,selector))&&result.push(last)}),unique(result)},prev:function(){return cash(this[0].previousElementSibling)},siblings:function(){var collection=this.parent().children(),el=this[0];return collection.filter(function(i){return i!==el})}}),cash})},{}],2:[function(require,module,exports){"use strict";var jQuery=require("cash-dom"),samples=require("./samples"),SERVER_URL="/compile",editor=ace.edit("editor");editor.setTheme("ace/theme/tomorrow_night"),editor.getSession().setMode("ace/mode/scala"),editor.renderer.setShowGutter(!1),editor.renderer.setScrollMargin(10,10),editor.$blockScrolling=1/0;var allPanels=jQuery("ul#examples li").addClass("closed");jQuery("ul#examples li").on("click",function(e){allPanels.addClass("closed"),jQuery(this).removeClass("closed");var title=jQuery(this).data("title");editor.setValue(samples[title],1)});var showOutput="let console_outputs = [];\nvar print_me = function(msg) {\n    console_outputs.push(msg);\n};",return_op=";(function() { return console_outputs }());",results=jQuery("div#results")[0],update_output=function(output,success){console.log(output);var str=void 0;str=success?output.map(function(o){return"<p>"+o+"</p>"}).join(""):"<p>"+output+"</p>",jQuery(results).html(str),success?jQuery(results).addClass("success").removeClass("failure"):jQuery(results).removeClass("failure").removeClass("success").addClass("failure")};jQuery("button#run").on("click",function(e){var userCode=editor.getValue();jQuery(results).html("<p>Loading ...</p>"),fetch(SERVER_URL,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({sourceCode:userCode})}).then(function(response){return 200!==response.status?void update_output("There was an error returned by the server",!1):void response.json().then(function(data){console.log("code loaded");var status=data.status,compiledCode=data.compiledCode,compilationTime=data.compilationTime;if(1===status){var error=data.error;update_output(error,!1)}else{var code=data.compiledCode;console.log("got this code",code),code=code.replace("// printing utils",showOutput),code+=return_op,window.compiledCode=code;var result=eval(code);update_output(result,!0)}})}).catch(function(err){update_output("Errer in fetch: "+err,!1)})})},{"./samples":3,"cash-dom":1}],3:[function(require,module,exports){"use strict";var gcd="val gcd = /\\(a, b) => {\n  // nested if-else expressions\n  if a == b then a\n  else if a > b\n  then gcd((a - b), b)\n  else gcd((b - a), a);\n};\n\nprint(gcd(10, 24));",prime="val countPrimes = /\\(n: num): num => {\n    val aux = /\\(count, l) => {\n        if hd(l) * hd(l) <= n\n        then aux(count + 1, List.filter(/\\(x) => x % hd(l) != 0, l))\n        else count + List.length(l);\n    };\n    aux(0, List.range(2, n+1));\n};\n\n// should be 25\nprint(countPrimes(100));",bottles='val toStr = /\\(x: num): string => if x == 0 then "no more" else num_to_string(x);\n\nval ninetyNine = /\\(x) => {\n  if x == 0\n  then {\n     print("No more bottles of beer on the wall, no more bottles of beer.");\n     print("Go to the store and buy some more, 99 bottles of beer on the wall.");\n  }\n  else {\n     print(toStr(x) ^ "bottle of beer on the wall, " ^\n       toStr(x) ^  " bottle of beer.");\n     if x == 2\n     then {\n        print("Take one down and pass it around, " ^\n                toStr(x - 1) ^ " bottle of beer on the wall.");\n        ninetyNine(x-1);\n     }\n     else {\n        print("Take one down and pass it around, " ^\n                toStr(x - 1) ^ " bottles of beer on the wall.");\n        ninetyNine(x-1);\n     };\n  };\n};\n\nninetyNine(99);',maps='// create maps just like javascript\nval marksInExams = {\n    "physics": 80,\n    "mathematics": 83,\n    "greek": 63,\n    "computer science": 94\n};\n\nval moneyOwedByFriends = {\n    "ben": 10,\n    "mary": 20,\n    "mark": 43,\n    "alice": 54\n};\n\n// a function that takes a map\nval getTotal = /\\(m: <string: num>): num => {\n    val values = Map.values(m);\n    List.fold_left(/\\(x, y) => x + y, 0, values);\n};\n\nprint(getTotal(moneyOwedByFriends));';module.exports={gcd:gcd,prime:prime,bottles:bottles,maps:maps}},{}]},{},[2]);
